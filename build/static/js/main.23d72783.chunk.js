(this["webpackJsonpanusic-api"]=this["webpackJsonpanusic-api"]||[]).push([[0],{23:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(2),i=a.n(s),c=a(17),l=a.n(c),o=(a(23),a(3)),r=a(4),d=a(7),m=a(6),h=a(5),j=a.n(h),u=(a(41),a(42),a(43),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={mode:0,anime:{},loading:!1},e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),j.a.get("".concat(this.props.endPoint,"/anime/").concat(this.props.animeId)).then((function(t){e.setState({loading:!1,anime:t.data})})).catch((function(){e.setState({loading:!1}),e.props.onAnimeClosed()}))}},{key:"render",value:function(){var e=this,t=[],a=[];if(this.state.anime&&this.state.anime.collections){t=this.state.anime.collections.filter((function(t){return e.collectionHasThemes(t,e.state.mode)})).map((function(t,a){return Object(n.jsxs)("details",{open:0===a,children:[Object(n.jsx)("summary",{children:Object(n.jsxs)("h6",{children:[Object(n.jsx)("span",{class:"badge badge-light",children:e.getThemesCount(t,e.state.mode)})," ",t.name]})}),Object(n.jsx)("ul",{className:"list-group mb-2",children:t.themes.filter((function(t){return t.type===e.state.mode})).map((function(t,a){return Object(n.jsxs)("li",{className:"list-group-item",children:[Object(n.jsxs)("div",{children:[Object(n.jsxs)("span",{className:"badge badge-primary mr-1",children:[0===e.state.mode?"OP":"ED"," ",t.order]}),Object(n.jsxs)("span",{className:"badge badge-secondary mr-1",children:["V",t.version]}),Object(n.jsx)("b",{children:t.name}),!0===t.isNSFW?Object(n.jsx)("span",{className:"badge badge-danger ml-1 float-right",children:"NSFW"}):"",!0===t.hasSpoilers?Object(n.jsx)("span",{className:"badge badge-danger ml-1 float-right",children:"SPOILERS"}):""]}),Object(n.jsx)("ul",{className:"list-group mt-2",children:t.sources.map((function(t,a){return Object(n.jsxs)("li",{className:"list-group-item list-group-item-source",children:[Object(n.jsx)("a",{target:"_blank",href:t.link,children:"Video"}),Object(n.jsx)("audio",{controls:!0,children:Object(n.jsx)("source",{src:t.link,type:"audio/ogg"})})]},a+300*(e.state.mode+1))}))})]},a+200*(e.state.mode+1))}))})]},a+100*(e.state.mode+1))}));var i=this.state.anime.collections.reduce((function(t,a){return t+e.getThemesCount(a,0)}),0),c=this.state.anime.collections.reduce((function(t,a){return t+e.getThemesCount(a,1)}),0);this.state.anime.collections.filter((function(t){return e.collectionHasThemes(t,0)})).length>0?a.push(Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("a",{className:"nav-link "+(0===this.state.mode?"active":""),onClick:function(){return e.onModeToggle(0)},children:[Object(n.jsx)("span",{class:"badge badge-secondary",children:i})," Opening(s)"]})})):0!==this.state.mode||this.state.loading||this.setState({mode:1}),this.state.anime.collections.filter((function(t){return e.collectionHasThemes(t,1)})).length>0&&a.push(Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)("a",{className:"nav-link "+(1===this.state.mode?"active":""),onClick:function(){return e.onModeToggle(1)},children:[Object(n.jsx)("span",{class:"badge badge-secondary",children:c})," Ending(s)"]})}))}return Object(n.jsx)(s.Fragment,{children:Object(n.jsx)("div",{className:"modal",children:this.state.loading?Object(n.jsx)("div",{className:"spinner spinner-border text-light float-right",role:"status",children:Object(n.jsx)("span",{className:"visually-hidden"})}):Object(n.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document",children:Object(n.jsxs)("div",{className:"modal-content",children:[Object(n.jsxs)("div",{className:"modal-header",children:[Object(n.jsxs)("h5",{className:"modal-title",children:[Object(n.jsxs)("div",{className:"title",children:[this.state.anime.name,this.state.anime.year?Object(n.jsx)("span",{className:"badge badge-secondary float-right",children:this.state.anime.year}):""]}),Object(n.jsx)("p",{className:"alt",children:this.state.anime.altNames?this.state.anime.altNames.join(","):""})]}),Object(n.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return e.props.onAnimeClosed()},children:Object(n.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(n.jsxs)("div",{className:"modal-body",children:[Object(n.jsx)("ul",{className:"nav nav-tabs",children:a}),Object(n.jsx)("div",{className:"tab",children:t})]}),Object(n.jsx)("div",{className:"modal-footer",children:Object(n.jsx)("a",{type:"button",className:"btn btn-primary",target:"_blank",href:"https://myanimelist.net/anime/".concat(this.state.anime.id),children:"Visit MAL Page"})})]})})})})}},{key:"onModeToggle",value:function(e){this.setState({mode:e})}},{key:"collectionHasThemes",value:function(e,t){return e.themes.some((function(e){return e.type===t}))}},{key:"getThemesCount",value:function(e,t){return e.themes.filter((function(e,a){return e.type===t&&1===e.version})).length}}]),a}(s.Component)),b=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={animeList:[],list:[],animeId:-1,infoShown:!1,loading:!1},e.endPoint="https://anusic-api.herokuapp.com/api/v1",e}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),j.a.get("".concat(this.endPoint,"/anime")).then((function(t){e.setState({animeList:t.data,list:t.data,loading:!1})})).catch((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this,t=null;return this.state.infoShown&&(t=Object(n.jsx)(u,{endPoint:this.endPoint,animeId:this.state.animeId,onAnimeClosed:this.onAnimeClosed.bind(this)})),Object(n.jsxs)(i.a.Fragment,{children:[Object(n.jsxs)("nav",{className:"navbar sticky-top navbar-light bg-light px-5",children:[Object(n.jsx)("a",{href:"/#",className:"navbar-brand",children:"Anusic React"}),Object(n.jsx)("div",{className:"form-inline",children:Object(n.jsx)("input",{className:"form-control mr-sm-2",type:"search",placeholder:"Search","aria-label":"Search",onChange:function(t){t.target.value.length>0?e.setState({list:e.state.animeList.filter((function(e){return e.name.toLowerCase().concat((e.altNames||[]).join(" ").toLowerCase()).concat((e.year||0).toString()).includes(t.target.value.toLowerCase().trim())}))}):e.setState({list:e.state.animeList})}})})]}),Object(n.jsxs)("main",{className:"p-5",children:[Object(n.jsxs)("div",{className:"alert alert-dark",role:"alert",children:[Object(n.jsx)("b",{children:this.state.list.length})," Anime fetched!",this.state.loading?Object(n.jsx)("div",{className:"spinner spinner-border float-right",role:"status",children:Object(n.jsx)("span",{className:"visually-hidden"})}):""]}),Object(n.jsx)("ul",{className:"list-group",children:this.state.list.map((function(t,a){return Object(n.jsxs)("a",{className:"list-group-item list-group-item-action",onClick:function(){return e.onAnimeClicked(t)},children:[Object(n.jsx)("span",{className:"name",children:t.name}),t.year?Object(n.jsx)("span",{className:"badge badge-secondary float-right",children:t.year}):"",t.altNames&&t.altNames.length>0?Object(n.jsx)("p",{className:"alt",children:t.altNames.join(",")}):""]},a)}))})]}),t]})}},{key:"onAnimeClicked",value:function(e){this.setState({infoShown:!0,animeId:e.id})}},{key:"onAnimeClosed",value:function(){this.setState({infoShown:!1})}}]),a}(s.Component),g=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,45)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),n(e),s(e),i(e),c(e)}))};l.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(b,{})}),document.getElementById("root")),g()}},[[44,1,2]]]);
//# sourceMappingURL=main.23d72783.chunk.js.map